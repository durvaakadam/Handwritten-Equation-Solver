<div style="display: flex; flex-direction: column; align-items: center; margin-top: 40px;">
  <canvas id="drawCanvas" width="400" height="400" 
          style="border:2px solid #333; background:white; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.2);">
  </canvas>
  <br>
  <button onclick="sendCanvas()" 
          style="padding:10px 20px; font-size:16px; border:none; border-radius:8px; 
                 background:#4CAF50; color:white; cursor:pointer; box-shadow:0 3px 8px rgba(0,0,0,0.2);">
    Predict
  </button>

  <h3 style="margin-top:20px;">Prediction: <span id="prediction">-</span></h3>
  <h3>Result: <span id="result">-</span></h3>
</div>

<script>
const canvas = document.getElementById("drawCanvas");
const ctx = canvas.getContext("2d");

// White background
ctx.fillStyle = "white";
ctx.fillRect(0, 0, canvas.width, canvas.height);

// Drawing settings
ctx.lineWidth = 2;
ctx.lineCap = "round";
ctx.strokeStyle = "black";

let drawing = false;

canvas.addEventListener("mousedown", e => { 
    drawing = true; 
    ctx.beginPath(); 
    ctx.moveTo(e.offsetX, e.offsetY); 
});
canvas.addEventListener("mousemove", e => { 
    if(drawing) { 
        ctx.lineTo(e.offsetX, e.offsetY); 
        ctx.stroke(); 
    }
});
canvas.addEventListener("mouseup", () => { drawing = false; });
canvas.addEventListener("mouseleave", () => { drawing = false; });

function sendCanvas() {
    const dataURL = canvas.toDataURL("image/png");
    fetch("/predict", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ image: dataURL })
    })
    .then(res => res.json())
    .then(data => {
        if(data.error){
            alert("Error: " + data.error);
            return;
        }
        // Update UI elements
        document.getElementById("prediction").innerText = data.prediction;
        document.getElementById("result").innerText = data.result;
    })
    .catch(err => alert("Request failed: " + err));
}
</script>
